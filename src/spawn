var roleSpawn = {
    run: function()
    {
        checkAndCreate('harvester', [CARRY, MOVE, MOVE, MOVE, MOVE,MOVE, MOVE, MOVE, WORK], 2, false);
        checkAndCreate('builder', [CARRY, CARRY, MOVE, MOVE, MOVE, WORK, WORK], 3, false);
        //checkAndCreate('upgrader', [CARRY, CARRY, CARRY, MOVE, WORK], 2, false);
    }
};

var checkAndCreate = function(role, body, limit, log)
{
    var cr = _.filter(Game.creeps, (creep) => creep.memory.role == role);   
	if(cr.length < limit) {
		var newName = role + Game.time;
		var res = Game.spawns['Spawn1'].spawnCreep(body, newName, {memory: {role: role}});
		if(res == 0)
		{
			console.log('Spawning new ' + newName);
		}
		else if(log)
		{
		    console.log('Not spawn' + role + ' ' + res);
		}
	}
};

module.exports = roleSpawn;